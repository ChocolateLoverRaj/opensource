"use strict";function normalize(e){return"/"===e?e:e.replace(/^\/+/,"/").replace(/\/+$/,"")}function regexify(e,r){var t=[];return r="^"+e.replace(/\//g,"\\/").replace(/:(\w+)/g,function(e,r){return t.push(r),"(\\w+)"})+"$",{regex:new RegExp(r,"i"),keys:t}}var index=function(e,r){return function(){if(r=!(history&&history.pushState))throw new Error("Not supported");var t=document.createElement("p"),n=function(r){var n=window.location,a=normalize(n.pathname),o={loc:n,params:{},pathname:a};for(var i in e){if(e[a])return t=e[a](o);if(r=regexify(i),r.regex.test(a)&&(a.replace(r.regex,function(){for(var e=arguments,t=1;t<arguments.length-2;t++)o.params[r.keys.shift()]=e[t];r.match=!0}),r.match))return t=e[i](o)}};return window.onpopstate=n,n(),t}};module.exports=index;