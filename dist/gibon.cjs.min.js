"use strict";function gibon(e,r){return function(n,t){function a(){return window.onpopstate=o,o(),r}function o(a){var o=window.location,i=o.pathname.replace(/^\/+/,"/").replace(/\/+$/,"");i=i||"/";var c={loc:o,params:{},pathname:i};e[i]&&(r=t(e[i],c,r,n));for(var u in e)if(a=regexify(u),a.regex.test(i)&&(i.replace(a.regex,function(){for(var e=arguments,r=1;r<arguments.length-2;r++)c.params[a.keys.shift()]=e[r];a.match=1}),a.match)){r=t(e[u],c,r,n);break}}return t=t||function(e,r){return e(r)},n?a:a()}}function regexify(e,r){var n=[];return r="^"+e.replace(/\//g,"\\/").replace(/:(\w+)/g,function(e,r){return n.push(r),"(\\w+)"})+"$",{regex:new RegExp(r,"i"),keys:n}}module.exports=gibon;