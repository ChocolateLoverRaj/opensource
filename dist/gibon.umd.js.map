{"version":3,"file":"gibon.umd.js","sources":["../src/index.js"],"sourcesContent":["/*!\n * gibon <https://github.com/tunnckoCore/gibon>\n *\n * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (http://i.am.charlike.online)\n * Released under the MIT license.\n */\n\n'use strict'\n\nexport default (routes, hash) => function start () {\n  hash = !(history && history.pushState) // eslint-disable-line no-undef\n  if (hash) throw new Error('Not supported')\n\n  let dom = document.createElement('p')\n  const handler = (_re) => {\n    let loc = window.location\n    let pathname = normalize(loc.pathname)\n    let context = {\n      loc,\n      params: {},\n      pathname\n    }\n\n    for (let route in routes) {\n      if (routes[pathname]) {\n        return (dom = routes[pathname](context))\n      }\n      _re = regexify(route)\n      if (_re.regex.test(pathname)) {\n        pathname.replace(_re.regex, function () {\n          for (let i = 1; i < arguments.length - 2; i++) {\n            context.params[_re.keys.shift()] = arguments[i]\n          }\n          _re.match = true\n        })\n\n        if (_re.match) {\n          return (dom = routes[route](context))\n        }\n      }\n    }\n  }\n\n  window.onpopstate = handler\n  handler()\n\n  return dom\n}\n\nfunction normalize (s) {\n  return s === '/' ? s : s.replace(/^\\/+/, '/').replace(/\\/+$/, '')\n}\n\nfunction regexify (route, _regex) {\n  const keys = []\n  _regex = '^' + route\n    .replace(/\\//g, '\\\\/')\n    .replace(/:(\\w+)/g, (_, name) => {\n      keys.push(name)\n      return '(\\\\w+)'\n    }) + '$'\n\n  return {\n    regex: new RegExp(_regex, 'i'),\n    keys\n  }\n}\n\n"],"names":["let","const","arguments"],"mappings":";;;;;;AAAA;;;;;;;AAOA,AAEA,YAAe,UAAC,MAAM,EAAE,IAAI,EAAE,SAAG,SAAS,KAAK,IAAI;EACjD,IAAI,GAAG,EAAE,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,CAAA;EACtC,IAAI,IAAI,EAAE,EAAA,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,EAAA;;EAE1CA,IAAI,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAA;EACrCC,IAAM,OAAO,GAAG,UAAC,GAAG,EAAE;IACpBD,IAAI,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAA;IACzBA,IAAI,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;IACtCA,IAAI,OAAO,GAAG;MACZ,KAAA,GAAG;MACH,MAAM,EAAE,EAAE;MACV,UAAA,QAAQ;KACT,CAAA;;IAED,KAAKA,IAAI,KAAK,IAAI,MAAM,EAAE;MACxB,IAAI,MAAM,CAAC,QAAQ,CAAC,EAAE;QACpB,QAAQ,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;OACzC;MACD,GAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAA;MACrB,IAAI,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;QAC5B,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,YAAY;;;UACtC,KAAKA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YAC7C,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,GAAGE,WAAS,CAAC,CAAC,CAAC,CAAA;WAChD;UACD,GAAG,CAAC,KAAK,GAAG,IAAI,CAAA;SACjB,CAAC,CAAA;;QAEF,IAAI,GAAG,CAAC,KAAK,EAAE;UACb,QAAQ,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC;SACtC;OACF;KACF;GACF,CAAA;;EAED,MAAM,CAAC,UAAU,GAAG,OAAO,CAAA;EAC3B,OAAO,EAAE,CAAA;;EAET,OAAO,GAAG;CACX,GAAA,CAAA;;AAED,SAAS,SAAS,EAAE,CAAC,EAAE;EACrB,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;CAClE;;AAED,SAAS,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE;EAChCD,IAAM,IAAI,GAAG,EAAE,CAAA;EACf,MAAM,GAAG,GAAG,GAAG,KAAK;KACjB,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;KACrB,OAAO,CAAC,SAAS,EAAE,UAAC,CAAC,EAAE,IAAI,EAAE;MAC5B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;MACf,OAAO,QAAQ;KAChB,CAAC,GAAG,GAAG,CAAA;;EAEV,OAAO;IACL,KAAK,EAAE,IAAI,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC;IAC9B,MAAA,IAAI;GACL;CACF;;;;"}