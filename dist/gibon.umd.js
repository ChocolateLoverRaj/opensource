!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.gibon=t()}(this,function(){function n(){var n=Object.create(null),t={_allEvents:n,use:function(n,e){return n(t,e)||t},on:function(n,e,r){function o(){o.called||(t.off(n,o),e.apply(e,arguments),o.called=!0)}var a=t._allEvents[n]||(t._allEvents[n]=[]),u=r?o:e;return u.__sourceString=e.toString(),a.push(u),t},once:function(n,e){return t.on(n,e,!0),t},off:function(n,e){if(e&&t._allEvents[n]){var r=e.toString();t._allEvents[n]=t._allEvents[n].filter(function(n){return n.__sourceString!==r})}else n?t._allEvents[n]=[]:t._allEvents=Object.create(null);return t},emit:function(n){if("*"!==n){var e=[].slice.call(arguments);(t._allEvents[n]||[]).map(function(n){n.apply(n,e.slice(1))}),(t._allEvents["*"]||[]).map(function(n){n.apply(n,e)})}return t}};return t}function t(n){return n&&"object"==typeof n&&!Array.isArray(n)}function e(){return function(n){n.createRoute=function(n,t){var e=r(n);return e.route=n,e.handler=t,e.match=function(n){return!!e.regex.test(n)&&o(e,n)},e}}}function r(n){var t=[],e="^"+n.replace(/\//g,"\\/").replace(/:(\w+)/g,function(n,e){return t.push(e),"(\\w+)"})+"$";return{regex:new RegExp(e,"i"),keys:t}}function o(n,t){var e=null;return n.params={},t.replace(n.regex,function(t){t=arguments;for(var r=1;r<t.length-2;r++)n.keys.forEach(function(e){n.params[e]=t[r]}),e=!0}),e?n.params:e}function a(t){return n().use(f()).use(function(n){Object.keys(t).forEach(function(e){n.addRoute(e,t[e])}),u(function(t,e){n.emit("historyChange",t,e)}),i(function(t,e){n.emit("hrefChange",t,e)})})}function u(n){window.addEventListener("popstate",function(t){var e={pathname:window.location.pathname,search:window.location.search,href:window.location.href,hash:window.location.hash};n(e,t)})}function i(n){window.addEventListener("click",function(t){if(1===c(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.defaultPrevented)){for(var e=t.path?t.path[0]:t.target;e&&"A"!==e.nodeName;)e=e.parentNode;if(e&&"A"===e.nodeName){var r=e.getAttribute("href");if(!(r&&r.indexOf("mailto:")>-1)){var o=e.host===window.location.host;if(o)return(o||e.pathname===window.location.pathname)&&t.preventDefault(),e.hasAttribute("data-no-routing")?void 0:void n(e,t)}}}})}function c(n){return n=n||window.event,null===n.which?n.button:n.which}var f=function(){return function(n){var r=null;n._routes=[],n.on("route",function(n,t){return n(t)}),n.addRoute=function(t,e){return n._routes.push(n.createRoute(t,e)),n},n.use(e()),n.navigate=function(e,o){o=t(o)?o:{};for(var a=!1,u=n._routes.length,i=0;i<u;){var c=n._routes[i++],f=c.match(e);if(!1!==f){a=!0;var l={state:o,route:c.route,params:f||{},pathname:e};n.emit("route",function(){return r=c.handler.apply(n,arguments)},l,r)}}return a||n.emit("notFound",{pathname:e,state:o}),r}}};return a});
//# sourceMappingURL=gibon.umd.js.map
